#src/Resources/config/runner_rabbitmq.yml
parameters:
  teknoo.east.bundle.coderunner.runner.remote_php7.class: 'Teknoo\East\CodeRunner\Runner\RemotePHP7Runner\RemotePHP7Runner'
  teknoo.east.bundle.coderunner.runner.remote_php7.identifier: 'RemotePHP7Runner'
  teknoo.east.bundle.coderunner.runner.remote_php7.name: 'RemotePHP7Runner'
  teknoo.east.bundle.coderunner.runner.remote_php7.version: '0.0.1'

  teknoo.east.bundle.coderunner.service.rabbit_mq_result_consumer.class: 'Teknoo\East\CodeRunner\Service\RabbitMQResultConsumerService'
  teknoo.east.bundle.coderunner.service.rabbit_mq_status_consumer.class: 'Teknoo\East\CodeRunner\Service\RabbitMQStatusConsumerService'

services:
  teknoo.east.bundle.coderunner.runner.remote_php7:
    class: '%teknoo.east.bundle.coderunner.runner.remote_php7.class%'
    private: false
    arguments:
      - '@teknoo.east.bundle.coderunner.vendor.old_sound_producer.remote_php7.task'
      - '%teknoo.east.bundle.coderunner.runner.remote_php7.identifier%'
      - '%teknoo.east.bundle.coderunner.runner.remote_php7.name%'
      - '%teknoo.east.bundle.coderunner.runner.remote_php7.version%'
      - []
    calls:
      - ['addCapability', ['@teknoo.east.bundle.coderunner.runner.capability.language.php7']]
    tags:
      - {name: 'teknoo.east.code_runner.runner.service'}

  teknoo.east.bundle.coderunner.service.rabbit_mq_result_consumer:
    class: '%teknoo.east.bundle.coderunner.service.rabbit_mq_result_consumer.class%'
    arguments:
      - '@teknoo.east.bundle.coderunner.runner.remote_php7'
      - '@teknoo.east.bundle.coderunner.manager.runners'
      - '@logger'

  teknoo.east.bundle.coderunner.service.rabbit_mq_status_consumer:
    class: '%teknoo.east.bundle.coderunner.service.rabbit_mq_status_consumer.class%'
    arguments:
      - '@teknoo.east.bundle.coderunner.runner.remote_php7'
      - '@teknoo.east.bundle.coderunner.manager.runners'
      - '@logger'
